(()=>{"use strict";var t={n:n=>{var a=n&&n.__esModule?()=>n.default:()=>n;return t.d(a,{a}),a},d:(n,a)=>{for(var r in a)t.o(a,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:a[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)};const n=jQuery;var a=t.n(n);const r=Module;var e=t.n(r);function o(t,n){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,n){if(t){if("string"==typeof t)return i(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){a&&(t=a);var r=0,e=function(){};return{s:e,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==a.return||a.return()}finally{if(c)throw o}}}}function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var a=0,r=new Array(n);a<n;a++)r[a]=t[a];return r}const s=function(t){e().after(["vcom/api"],(function(){var n=modules.vcom.api,r={noun:"n",verb:"v",adjective:"adj",adverb:"adv"};a()((function(a){var e=a(t),i={};function s(t){var n=t.children("div").toArray(),a=Math.floor(Math.random()*(n.length-1))+1,r=n[0];n[0]=n[a],n[a]=r;for(var e=1;e<n.length;e++){var o=Math.floor(Math.random()*(n.length-1))+1,i=n[e];n[e]=n[o],n[o]=i}t.empty(),t.append(n)}function c(t){var n=t.find(".card").last().addClass("locked");a('\n\t\t\t\t\t<div class="sign-in-panel">\n\t\t\t\t\t\t<div class="msg">Continue learning with flashcards!</div>\n\t\t\t\t\t\t<div class="actions"><a href="/login/" class="log-in">Log in</a><a href="/signup/" class="button green sign-up v2" role="button">Sign up</button></div>\n\t\t\t\t\t</div>\n\t\t\t\t').appendTo(n.find(".faces"))}function d(t,n,r){var o=a(this),i=o.data("curIdx");(r||i!==n)&&(o.trigger("unflipall").find(".card").each((function(t,r){var e=t-n,o=a(r);e<0&&e>=-3||e>0&&e<=3||0==e?o.attr("data-pos",e):e>0?o.attr("data-pos",4):o.attr("data-pos",-4)})),o.data("curIdx",n),e.find(".controls").trigger("update",n))}function l(t,n,a){var r=t.split(/\W+/),e=0;r.forEach((function(t){e=Math.max(e,t.length)}));var i,s=0,c=o(n);try{for(c.s();!(i=c.n()).done;){var d=i.value;if(e<=d)break;s++}}catch(t){c.e(t)}finally{c.f()}var l,u=0,f=o(a);try{for(f.s();!(l=f.n()).done;){var p=l.value;if(t.length<=p)break;u++}}catch(t){f.e(t)}finally{f.f()}return Math.max(s,u)}e.on("load",(function(){var t=e.attr("data-unitid"),o=e.attr("data-unitslug"),u=e.attr("data-listid");u&&(e.addClass("loading").trigger("loading"),n.remote("/lists/"+u).then((function(n){e.removeClass("loading").trigger("loaded");var f=n.wordlist;if(f&&f.words&&f.words.length){e.empty();var p=a('<div class="cards"/>').appendTo(e),v=f.words.length;i.validUser||(f.words=f.words.slice(0,4)),f.words.forEach((function(t){t.word=t.word||"",t.sense=t.sense||{definition:"",part_of_speech:""};var n=l(t.word,[12,20],[26,40]),e=n>0?" long-".concat(n):"",o=l(t.sense.definition,[20,30],[80,120]),i=o>0?" long-".concat(o):"",s=a('\n\t\t\t\t\t\t\t\t\t<div class="card">\n\t\t\t\t\t\t\t\t\t\t<div class="faces">\n\t\t\t\t\t\t\t\t\t\t\t<div class="front'.concat(e,'">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="inner-border">').concat(t.word,'</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="back').concat(i,'">\n\t\t\t\t\t\t\t\t\t\t\t\t<div class="inner-border">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div class="pos-def">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span class="pos">').concat(r[t.sense.part_of_speech]||"",'.</span><span class="def">').concat(t.sense.definition,"</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t")).appendTo(p);t.sense.audio&&t.sense.audio.length&&a('<div class="audios"></div>').append(t.sense.audio.map((function(t){return a('<a href="#0" data-audio="'.concat(t,'" class="audio"></a>'))}))).appendTo(s.find(".front .inner-border"))}));var g=p.find("> .card").length;i.validUser||c(p);var h=a('\n\t\t\t\t\t\t\t\t<div class="shuffle">\n\t\t\t\t\t\t\t\t\t<button type="button" class="btn-shuffle">Shuffle</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t').appendTo(e),b=a('\n\t\t\t\t\t\t\t\t<div class="controls">\n\t\t\t\t\t\t\t\t\t<button type="button" class="button prev">Previous</button>\n\t\t\t\t\t\t\t\t\t<span class="progress"><span class="count">1</span><span class="of">/</span><span class="total">'.concat(v,'</span></span>\n\t\t\t\t\t\t\t\t\t<button type="button" class="button next">Next</button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t')).appendTo(e),y=t&&o?"/lists/".concat(t,"/").concat(o,"/flashcards?listid=").concat(u):"/lists/".concat(u,"/flashcards");a('<a href="'.concat(y,'" class="view-all">View fullscreen</a>')).appendTo(e);var m=b.find(".count"),w=b.find(".button.prev"),C=b.find(".button.next"),x=h.find(".btn-shuffle");p.on("arrange",d).on("click",".card",(function(t){if("A"!=t.target.tagName){var n=a(this),r=p.data("curIdx"),e=n.index();r===e?n.hasClass("locked")||n.trigger("flip"):p.trigger("arrange",[e,!1])}})).on("click",".card.locked .actions a",(function(t){window.VCOM&&(t.preventDefault(),a(this).hasClass("sign-up")?window.VCOM.signupAndReturn():window.VCOM.signin())})).on("flip",".card",(function(){a(this).toggleClass("flipped")})).on("unflipall",(function(){p.find(".card.flipped").trigger("flip")})).on("flipcurrent",(function(){var t=p.data("curIdx");"number"==typeof t&&p.find(".card").eq(t).not(".locked").trigger("flip")})),x.on("click",(function(){i.validUser?s(p):(p.find(".card").last().removeClass("locked"),p.find(".card").last().find(".faces").find(".sign-in-panel").remove(),s(p),c(p)),p.trigger("arrange",[0,!0])})),b.on("click",".prev,.next",(function(t){t.preventDefault(),t.stopPropagation();var n=p.data("curIdx");a(this).hasClass("prev")?n>0&&p.trigger("arrange",[n-1,!1]):n<g-1&&p.trigger("arrange",[n+1,!1])})).on("update",(function(t,n){m.text((n+1).toLocaleString("en-US")),w.attr("aria-disabled",0==n?"true":null),C.attr("aria-disabled",n==g-1?"true":null)})),p.trigger("arrange",[0,!1])}}),(function(){})))})),window.VCOM?window.VCOM.authCache.get().then((function(t){i=t,e.trigger("load")})):e.trigger("load"),e.on("keydown",(function(t){39==t.which?(t.preventDefault(),t.stopPropagation(),e.find(".controls .button.next").not('[aria-disabled="true"]').trigger("click")):37==t.which?(t.preventDefault(),t.stopPropagation(),e.find(".controls .button.prev").not('[aria-disabled="true"]').trigger("click")):32==t.which&&(t.preventDefault(),t.stopPropagation(),e.find(".cards").trigger("flipcurrent"))})),e.attr("tabindex",0)}))}))};function c(t,n){(null==n||n>t.length)&&(n=t.length);for(var a=0,r=new Array(n);a<n;a++)r[a]=t[a];return r}var d;(d=document.getElementsByClassName("flashcard-app"),function(t){if(Array.isArray(t))return c(t)}(d)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(d)||function(t,n){if(t){if("string"==typeof t)return c(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(t,n):void 0}}(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(t){new s(t)}))})();