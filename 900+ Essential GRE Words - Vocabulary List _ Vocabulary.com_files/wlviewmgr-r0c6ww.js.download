Module.define("vcom/wlviewmgr",["params","jquery"],function(){jQuery(function(d){function f(a){var b=""+e;a===g?delete e.view:e.view=a;h.attr("data-view",a);d("#view_"+a).addClass("selected").siblings("a").removeClass("selected");"notes"==a?d("#wordlist").addClass("notesView").removeClass("listView").trigger("resize"):d("#wordlist").addClass("listView").removeClass("notesView").trigger("resize");""+e!=b&&(a=e.toString(),a.length?history.replaceState({},document.title,location.pathname+location.search+
"#"+a):history.replaceState({},document.title,location.pathname+location.search))}function k(a){return function(b,c){return-a(b,c)}}function l(){e=new modules.params.Params(document.location.hash?document.location.hash.substring(1):"");f("list"===(e.view||g)?"list":"notes")}var e=null;d(".page_wordlist");var h=d(".page_wordlist .viewSelector"),g=h.data("defaultview")||"notes";d("#wlOrder").on("change",function(){if(c[this.value]){var a=c[this.value];d("#wordlist li.entry").sort(a).appendTo(d("#wordlist").scrollTop(0));
c.current=a}});h.find("a").on("click",function(){d(this).hasClass("toggle-container")?f("list"===(e.view||g)?"notes":"list"):f(d(this).data("view"))});var c={alpha:function(a,b){a=a.getAttribute("word");b=b.getAttribute("word");var c=a.toLowerCase().replace(/[-\/'\s]+/,""),d=b.toLowerCase().replace(/[-\/'\s]+/,"");return c==d?a==b?0:a<b?-1:1:c<d?-1:1}};c.ralpha=k(c.alpha);c.freq=function(a,b){a=parseFloat(a.getAttribute("freq"));b=parseFloat(b.getAttribute("freq"));return isNaN(a)?isNaN(b)?0:1:isNaN(b)?
-1:a==b?0:a<b?-1:1};c.rfreq=k(c.freq);c.natural=function(a,b){a=parseInt(a.id.substring(5));b=parseInt(b.id.substring(5));return a==b?0:a<b?-1:1};c.progress=function(a,b){a=parseFloat(a.getAttribute("prog"));b=parseFloat(b.getAttribute("prog"));return isNaN(a)?isNaN(b)?0:1:isNaN(b)?-1:a==b?0:a<b?1:-1};c.current=c.natural;d(window).on("hashchange",l);l()})});